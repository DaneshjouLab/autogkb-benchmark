# One Shot Citations

Our goal in this is to find citations for the pharmacogenomic association sentences generated by our pipeline. For a given article and it's corresponding asociation sentences, we should have an llm that takes in an article, a list of found associations (strings) and then for each sentence finds us 2-5 sentences in the text that support the claim(s). Here's an example prompt that I haven't tested yet but covers the main idea:
"""
From the following article text, find the top 3-5 sentences from the article that are most relevant to and support the proposed effect of the pharmacogenomic relationship. 

Pharmacogenomic Relationships:
{[(sentence, explanation) for each we have]}

Article text:
"{article_text}"

If a table provides the support warranting of being included, return the table header (## Table X: ..., etc.) as your sentence. Make sure to include a sentence or table in your top responses if it has the p-value for the relationship.
Output the exact sentences from the article text in a numbered list with each sentence on a new line. No other text.
Keep in mind that headings are text/numbers preceded by hash symbols (#) and should not be included in citations unless referencing the table. Only include content sentences.
"""
Make sure to edit this as you see fit before running.
Save outputs in a folder outputs/
Have your prompts be in a prompts.yaml file

## Evaluation
Let's have an LLM as a judge pipeline for this that evaluates the quality of the citations generated by the LLM. It should evaluate how well the citations support the claims made in the pharmacogenomic relationships and whether the citations are relevant to the claims for each pmcid separately. The judge should return a score for the citations generated for each pmcid and sentence. Let's run this in a batch with each call covering all the sentences for a given pmcid.
Save the judging results in a folder called results/

This is relatively similar to the evaluation pipeline we used for the association sentence generation